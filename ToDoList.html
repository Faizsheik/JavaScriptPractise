<!DOCTYPE html>

<html>
    <head>

        <style>

            body{
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                background: linear-gradient(100deg,  rgb(249, 172, 198),rgb(202, 231, 241));

            }
            #task {
                border-radius: 15px;
                height: 30px;
                padding-left: 10px;
                font-size: 16px;
                width: 400px; 
            }

            .task-text {
            width: 200px; /* Fixed width */
            max-width: 200px; /* Prevent expansion beyond 200px */
            word-wrap: break-word; /* Break long words */
            overflow-wrap: break-word;
            white-space: normal; /* Allow text to wrap */
            border: 1px solid black;
            border-radius: 8px;
            padding: 5px;
            height: auto; /* Let height adjust dynamically */
        }


            #submit {
                    background-color: pink;
                    height: 35px;
                    border-radius: 15px;
                    font-size: 16px;
                    font-weight: bold;
                    font-family: Arial, Helvetica, sans-serif;
                    width: 80px; 
                }

            #outer {
                display: flex;
                border: 2px solid transparent; 
                border-radius: 23px;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); 
                flex-direction: column;
                margin-top: 30vh;
                padding: 20px;
                padding-top: 2px;
                background-color: rgb(245, 253, 228);
            }

            #addtask
            {
                padding: 6px;
                /* border: 2px solid rgb(225, 30, 30); */
                gap:1px;
                
                
            }

            
            #viewtask
            {
                display: block;
                border: 1px solid goldenrod; 
                border-radius: 15px;
            }

            .deletebutton
            {
                background-color: red;
                height: 25px;
               
                border-radius: 15px;
                font-size: 100; 
                font-weight: bold; 
                font-family: Arial, Helvetica, sans-serif;
            
            }
            .updatebutton
            {
                background-color: rgb(39, 171, 92);
                height: 25px;
                border-radius: 15px;
                font-size: 100; 
                font-weight: bold; 
                font-family: Arial, Helvetica, sans-serif;

            }
            
            .listcss {
            display: grid;
            grid-template-columns: 30px 1fr 130px 60px 60px;
            gap: 1px;
            height: auto;
            border-radius: 40px;
            padding: 8px;
            max-width: 400px; /* Restrict the overall width of the row */
        }


        #taskTestId {
            border: 1px solid black;
            border-radius: 8px;
            padding: 5px;
            width: 200px; /* Fixed width */
            max-width: 200px; /* Ensure span doesn't expand beyond this width */
            word-wrap: break-word; /* Break long words */
            overflow-wrap: break-word; /* Handle text wrapping */
            white-space: normal; /* Allow text to wrap to the next line */
            display: inline-block; /* Ensure the span respects the width */
        }



            #checkboxid
            {
                width:10px;
                height: 15px;
                margin-top: 7px;
            }
            ul
            {
                padding-right: 50px;
            }
            .task-meta {
            margin-left: 10px;
            color: grey;
            font-size: 12px;
            white-space: nowrap;
        }
     

            

            
        </style>

        
    </head>
    <body>
        


        <div id="outer">
           
            <h2 style="text-align: center;color: palevioletred;">To Do List</h2>

            <div id = "addtask">
                <input type = "text" id="task"  style="border-radius: 15px; height: 30px;"  placeholder="Enter your task"/>
                <button type = "submit" id="submit" style="background-color: pink; height: 35px; border-radius: 15px; font-size: 100; font-weight: bold; font-family: Arial, Helvetica, sans-serif;">Add</button>
                <input type = "search" id="search" placeholder="Search"   style=" height: 35px; width:65px;border-radius: 15px; font-size: 100; font-weight: bold; font-family: Arial, Helvetica, sans-serif;"/>

            </div>
            <div id = "viewtask">
                <h3 style="color: palevioletred;margin-left: 5px;">Tasks :</h3>
                    <ul id="tasklist" className="tasklistclass">

                    </ul>               
            </div><br>
           
            <div id="completedTasks">
                <h3 style="color: palevioletred;">Completed Tasks : </h3>
                <ul id="completedTaskList"></ul>
            </div>
    
            <div id="uncompletedTasks">
                <h3 style="color: palevioletred;">Uncompleted Tasks : </h3>
                
                <ul id="uncompletedTaskList"></ul>
               
            </div>
        </div>
      

        <script>

            const submit = document.getElementById("submit");
            const task = document.getElementById("task");
            const tasklist =  document.getElementById("tasklist");
            const completeButton = document.getElementById("completeButton");
            const uncompleteButton = document.getElementById("uncompleteButton");
            const completedTaskList = document.getElementById("completedTaskList");
            const uncompletedTaskList = document.getElementById("uncompletedTaskList");

            submit.addEventListener("click",function()
            {

                    let taskvalue = task.value;
                    let list = document.createElement("li");
                    list.className = "listcss";

                    let checkbox = document.createElement("input");
                    checkbox.type = "checkbox";
                    checkbox.className= "checkboxid";



                    let taskText = document.createElement("span");
                    taskText.textContent = taskvalue ;
                    taskText.id = "taskTestId";

                    let datetime_span= document.createElement("span");
                    datetime_span.className="task-meta";
                    let date= new Date();
                    datetime_span.style.width = "70px";
                    datetime_span.style.marginTop = "6px";
                    datetime_span.style.color= "rgb(39, 171, 92)";
                    datetime_span.style.fontSize= "130";
                    datetime_span.style.fontWeight= "Bold";


                    


                    let datenow = date.toLocaleDateString();
                    let timenow = date.toLocaleTimeString();
                    datetime_span.innerText = datenow + timenow;


                    
                    let del= document.createElement("button");
                    del.className = "deletebutton";
                    del.id = "deletebutton";
                    del.innerText = "Delete";

                    let update = document.createElement("button");
                    update.className = "updatebutton";
                    update.id = "updatebutton";
                    update.innerText = "Update";

                    

                    list.appendChild(checkbox);
                    list.appendChild(taskText);
                    list.appendChild(datetime_span);
                    list.appendChild(update);
                    list.appendChild(del);
                    

                    tasklist.appendChild(list);

                    task.value = "";



                  
                    del.addEventListener("click",function()
                    {
                          list.remove();
                    })

                    update.addEventListener("click", function() 
                    {
                        const newTask = prompt("Update the task:", taskText.textContent);
                        if (newTask !== null && newTask.trim() !== "") 
                        {
                            taskText.textContent = newTask;
                         }
                     })    

                     checkbox.addEventListener("click", function () 
                    {
                        if(checkbox.checked == true)
                        {
                            moveTasks(true);

                        }
                        else
                        {
                            moveTasks(false);
                        }
                    });

                    function moveTasks(toCompleted) 
                   {
                        let sourceList = toCompleted ? tasklist : completedTaskList;
                        let targetList = toCompleted ? completedTaskList : uncompletedTaskList;
                        let items = sourceList.querySelectorAll("li");

                        items.forEach(item => {
                            let checkbox = item.querySelector("input[type='checkbox']");
                            if (checkbox.checked === toCompleted) {
                                targetList.appendChild(item);
                            }
                        });
                    }


                    

            })
           
          

            search.addEventListener("input",function()
            {
                const search = document.getElementById("search");
                const searchinput =search.value;
                const taskarray = Array.from(tasklist.querySelectorAll("li"));
                taskarray.forEach((task)=>   
                {
                    let description = task.querySelector("span").textContent.toLowerCase();
                    if(description.includes(searchinput.toLowerCase()))
                    {
                        task.style.display = ""; //clearing the custom display value;
                    } 
                    else
                    {
                        task.style.display = "none";
                    }

                });

                
            })


            


        
        

       
           
        </script>
    </body>
</html>



